---
title: '华夏ERP 项目部署'
metaTitle: '这里将引导您部署华夏ERP ，让我们开始吧!'
metaDescription: '这里将引导您部署华夏ERP ，让我们开始吧!'
sidebar_position: 3
sidebar_label: '华夏ERP 项目部署'
---

# 1.背景

很多人说华夏 ERP（英文名：jshERP）是目前人气领先的国产ERP系统。 虽然目前只有进销存+财务+生产的功能，但后面将会推出ERP的全部功能。

OSRC（开源运行时社区[osrc.com](https://osrc.com/)） 是基于云原生技术，让开源爱好者以运行时形态分享开源作品的社区服务。OSRC(开源运行时社区)致力于推动开源项目向更成熟方向发展，开源项目可以在OSRC社区中在线运行起来，运行起来的项目可以提供更鲜活的体验，从而为投身于开源的小伙伴提供助力。
    

## 华夏ERP 介绍
 
![logo](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649921426073_logo.PNG)
 

华夏ERP基于SpringBoot框架和SaaS模式，立志为中小企业提供开源好用的ERP软件，目前专注进销存+财务+生产功能。主要模块有零售管理、采购管理、销售管理、仓库管理、财务管理、报表查询、系统管理等。支持预付款、收入支出、仓库调拨、组装拆卸、订单等特色功能。拥有库存状况、出入库统计等报表。同时对角色和权限进行了细致全面控制，精确到每个按钮和菜单。
 
 

**官网: [http://www.huaxiaerp.com](http://www.huaxiaerp.com)**  


 

# 2. 在开源运行时社区的部署过程

下面描述一下系统在 OSRC 的部署过程。

## step 1：获取代码
首先从 Gitee 获取代码 :  [gitee.com](https://gitee.com/jishenghua/JSH_ERP) :


        git clone https://gitee.com/jishenghua/JSH_ERP


## step 2:分析代码

 后端主程序在 C:\_OSRC_dev\JSH_ERP\jshERP-boot 下，前端在C:\_OSRC_dev\JSH_ERP\jshERP-web 下。 


## step 3: 后台部署


### 1. 配置 Database 资源 
项目使用 mysql 数据库（数据库资源在 C:\_OSRC_dev\JSH_ERP\jshERP-boot\docs 目录下），数据库 jsh_erp  ：

1. 创建Database 数据库
2. 按要求执行DDL(C:\_OSRC_dev\JSH_ERP\jshERP-boot\docs\jsh_erp.sql)，创建、配置数据库对象。
 
![配置 jsh_erp 截图1](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649921465888_2.PNG) 

### 2. 配置后台服务  


 配置文件：  C:\_OSRC_dev\JSH_ERP\jshERP-boot\src\main\resources\application.properties  
 
#### 1.3. 修改项目 mysql Database 配置


        spring.datasource.url=jdbc:mysql://*******:3306/jsh_erp?useUnicode=true&characterEncoding=utf8&useCursorFetch=true&defaultFetchSize=500&allowMultiQueries=true&rewriteBatchedStatements=true&useSSL=false
        spring.datasource.driverClassName=com.mysql.jdbc.Driver
        spring.datasource.username=root
        spring.datasource.password=*******  

#### 1.3. 修改项目 redis 配置
 配置文件：  ..\zhaoxinwy-admin\src\main\resources\application.yml  

        spring.redis.host= ************** 
        spring.redis.port=6379
        spring.redis.password= 

 #### 1.4. 端口调整  
        server:
                # 服务器的HTTP端口，默认为8080
                # port: 8080
                # 原 8080 端口 修改为随机端口
                port: ${random.int[10000,15000]} 


调整后的文件 [application.properties](https://gitee.com/havithe/JSH_ERP/blob/osrc/jshERP-boot/src/main/resources/application.properties) 
  
#### 2.1. 日志配置  

 云端部署删除 logback 

### 3. 项目编译 
#### 3.1. 后端编译

项目 jshERP-boot 目录下执行：

        mvn clean intall
         

![ 编译成功 截图1](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649921913797_4.PNG)

#### 3.3. 本地试运行 

        ..\zhaoxinwy-admin\target>java -jar jshERP.jar
 
运行成功：
![admin 目录试运行 成功 截图1](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649921852413_18.PNG)

#### 3.3.部署到osrc
jshERP-boot 目录下pom.xml文件引入编译部署插件。

        <plugin>
        <groupId>com.maplecloudy.osrt</groupId>
        <artifactId>maplecloudy-osrt-maven-plugin</artifactId>
        <version>1.1.0-SNAPSHOT</version>
        <executions>
                <execution>
                <goals>
                        <goal>repackage</goal>
                        <goal>install-osrt-app</goal>
                </goals>
                </execution>
        </executions>
        </plugin> 

运行mvn clean install 部署到 osrc：[华夏ERP ](https://www.maplecloudy.com/osrc/projects/project_807316568498298880)



### 4. 启动后台服务 
4.1. 启动服务
![jsh1.png](https://oss.osrc.com/wiki/img/1658286230751_jsh1.png)

4.2.	查看日志

查看日志，并登记运行端口
![jsh2.png](https://oss.osrc.com/wiki/img/1658286454921_jsh2.png)


## step 4. 前端部署 

#### 1. 调整配置 
1.1. 检查 packagejson
  调整Version和后台保持一致

新代码:

  "version": "3.0-SNAPSHOT",
  
 

#### 4.2. 构建前端项目 
4.2.1. 依赖安装
        
        yarn config set registry https://registry.npm.taobao.org

yarn config v1.22.18
success Set "registry" to "https://registry.npm.taobao.org".
Done in 0.05s.
        
        yarn install

        warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
        [1/4] Resolving packages...
        [2/4] Fetching packages...
        [3/4] Linking dependencies...
        warning " > vue-loader@15.9.0" has unmet peer dependency "css-loader@*".
        warning " > vue-loader@15.9.0" has unmet peer dependency "webpack@^3.0.0 || ^4.1.0 || ^5.0.0-0".
        warning " > compression-webpack-plugin@3.1.0" has unmet peer dependency "webpack@^4.3.0 || ^5.0.0".
        warning " > html-webpack-plugin@4.2.0" has unmet peer dependency "webpack@>=4.0.0 < 6.0.0".
        warning " > less-loader@4.1.0" has unmet peer dependency "webpack@^2.0.0 || ^3.0.0 || ^4.0.0".
        [4/4] Building fresh packages...
        Done in 96.10s.
 

  ![ yarn 截图 ](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649922587595_5.PNG)

4.2.2. bulid
运行 yarn build，编译成功
        
 
编译通过：
 ![ yarn build 截图 1](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649922709526_9.PNG)
				 
![ yarn build 截图 2]((https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649922726782_8.PNG)

#### 4.3. 前端osrc部署 

执行deploy命令osrc deploy

        osrc deploy

  ![ deploy 截图 ](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649922816112_14.PNG)

## 配置代理 
在OSRC 用户自己的page下找刚发布的项目

根据  ..\JSH_ERP\jshERP-web\vue.config.js 中配置 , 更新代理配置：

        proxy: {
                '/jshERP-boot': {
        ... 

服务端代理配置：
![jsh3.png](https://oss.osrc.com/wiki/img/1658286925788_jsh3.png)
```
predicates:
  - Path=/jshERP-boot/**
```

## 进入系统
打开链接，进入系统：系统链接
[系统链接](https://page-havithe-a5ecfd730e34adf6448a0a733d22ce41.osrc.com/)  


![登录页面](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649923904588_22.PNG)

系统默认租户账号：jsh，默认超管账户：admin，默认密码均为：123456

![系统截图1](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649922991852_12.PNG)

![系统截图2](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649923011105_16.PNG)

![系统截图3](https://osrtm.oss-cn-beijing.aliyuncs.com/wiki/img/1649923025245_17.PNG)


  

  
